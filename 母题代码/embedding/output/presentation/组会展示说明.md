# 组会展示材料说明

## 📂 已生成文件

输出目录：`output/presentation/`

### 1. **sample_embeddings.json** (158.6 KB)
**用途**：展示具体例子

**内容**：前5个题目的完整1024维向量

**展示方式**：
```json
{
  "title": "万灵之树",
  "embedding_vector": [-0.0408, 0.0083, -0.0555, ...],  // 1024个数字
  "statistics": {
    "min": -0.1810,
    "max": 0.2332,
    "mean": -0.0007,
    "norm": 3.2456
  }
}
```

**PPT展示建议**：
- 第1页：展示1个完整的1024维向量（可视化为热力图）
- 第2页：对比2个题目的向量差异
- 第3页：展示统计信息表格

---

### 2. **embeddings_summary.json** (14.0 KB)
**用途**：制作统计表格

**内容**：所有39个题目的统计摘要 + 前10个题目的相似度矩阵

**关键数据**：
```json
{
  "overall": {
    "total_schemas": 39,
    "embedding_dimension": 1024,
    "value_range": {"min": -0.19, "max": 0.24}
  },
  "per_schema_statistics": [...],  // 每个题目的统计
  "similarity_matrix_sample": {
    "matrix": [[1.0, 0.87, ...], ...]  // 10×10相似度矩阵
  }
}
```

**PPT展示建议**：
- 制作表格：题目名称 | 向量范围 | 模长 | 标准差
- 绘制相似度矩阵热力图（10×10）
- 展示整体分布直方图

---

### 3. **visualization_data.json** (3.4 KB)
**用途**：图表数据

**内容**：
- 维度分布统计（前20维）
- 向量模长分布（所有39个题目）
- 最相似的5对题目

**关键数据**：
```json
{
  "dimension_distribution": {
    "means": [-0.031, 0.015, ...],  // 每个维度的平均值
    "stds": [0.018, 0.022, ...]     // 每个维度的标准差
  },
  "norm_distribution": {
    "norms": [3.24, 3.18, 3.31, ...]  // 每个题目的向量长度
  },
  "top_similar_pairs": [
    {
      "schema1": {"title": "题目A"},
      "schema2": {"title": "题目B"},
      "similarity": 0.92
    }
  ]
}
```

**PPT展示建议**：
- 柱状图：展示前20个维度的分布
- 直方图：所有题目的模长分布
- 表格：最相似的题目对（展示"母题-变体"关系）

---

### 4. **full_embeddings.json** (1.2 MB)
**用途**：完整备份，供深入分析

**内容**：所有39个题目的完整1024维向量

**使用场景**：
- 如果评委要求看具体数据
- 导入Excel/Matlab进行自定义分析
- 演示实时相似度计算

---

## 📊 组会PPT建议结构

### 第1部分：研究背景（5分钟）
**Slide 1: 问题提出**
- LeetCode题目如何表示？
- 传统方法：纯文本 → 难以计算相似度
- 我们的方案：Schema五元组 + Embedding向量化

**Slide 2: 技术路线**
```
题目文本
  ↓ 五元组提取
Schema (5个字段)
  ↓ Qwen API (text-embedding-v3)
5个1024维向量
  ↓ 加权融合
1个1024维向量（题目的"语义指纹"）
```

---

### 第2部分：技术实现（8分钟）

**Slide 3: Schema五元组**
展示一个例子：
```json
{
  "Input Structure": ["数组A[1..n]", "整数元素"],
  "Core Constraint": ["连续子数组", "和最大"],
  "Objective Function": "最大化子数组和",
  "Algorithmic Invariant": ["动态规划", "Kadane算法"],
  "Transformable Parameters": ["数组长度可变", "值域可调整"]
}
```

**Slide 4: Embedding过程**
- 使用 `sample_embeddings.json` 展示
- 截图：完整的1024维向量
- 统计信息表格

**Slide 5: 向量特性**
使用 `embeddings_summary.json` 制作：
| 题目 | 向量范围 | 模长 | 标准差 |
|------|---------|------|-------|
| 万灵之树 | [-0.18, 0.23] | 3.25 | 0.067 |
| 与非的谜题 | [-0.18, 0.22] | 3.18 | 0.066 |
| ... | ... | ... | ... |

---

### 第3部分：实验结果（10分钟）

**Slide 6: 相似度矩阵**
使用 `embeddings_summary.json` 中的 `similarity_matrix_sample`
- 绘制10×10热力图
- 标注高相似度对（>0.85）

**Slide 7: 最相似题目对**
使用 `visualization_data.json` 中的 `top_similar_pairs`：
| 题目1 | 题目2 | 相似度 | 解释 |
|-------|-------|--------|------|
| XXX | YYY | 0.92 | 都是动态规划题 |
| AAA | BBB | 0.89 | 都涉及图遍历 |

**Slide 8: 向量分布分析**
- 使用 `visualization_data.json`
- 绘制模长分布直方图
- 绘制前20维的均值/标准差柱状图

---

### 第4部分：应用价值（5分钟）

**Slide 9: 应用场景**
1. **相似题推荐**：给定题目A，找相似度>0.85的题目
2. **题目去重**：检测重复/抄袭题目
3. **难度分级**：基于向量聚类自动分类
4. **知识图谱**：构建题目关系网络

**Slide 10: 研究价值**
- 可量化：用余弦相似度度量
- 可复现：相同输入→相同向量
- 可扩展：新题目自动向量化
- 可发表：3个论文方向
  1. 基于语义向量的题目表示 → ACM SIGCSE
  2. 题目聚类与知识图谱 → AAAI/EDM
  3. LLM驱动的推荐系统 → RecSys

---

## 🛠️ 快速可视化脚本

如果需要快速生成图表，可以使用以下Python代码：

```python
import json
import matplotlib.pyplot as plt
import seaborn as sns
import numpy as np

# 1. 读取数据
with open('output/presentation/embeddings_summary.json', 'r', encoding='utf-8') as f:
    summary = json.load(f)

with open('output/presentation/visualization_data.json', 'r', encoding='utf-8') as f:
    viz = json.load(f)

# 2. 绘制相似度矩阵热力图
sim_matrix = np.array(summary['similarity_matrix_sample']['matrix'])
titles = summary['similarity_matrix_sample']['titles']

plt.figure(figsize=(10, 8))
sns.heatmap(sim_matrix, 
            xticklabels=[t[:10] for t in titles],  # 截断长标题
            yticklabels=[t[:10] for t in titles],
            annot=True, fmt='.2f', cmap='RdYlGn', vmin=0, vmax=1)
plt.title('题目相似度矩阵 (前10个题目)', fontsize=14, fontproperties='SimHei')
plt.tight_layout()
plt.savefig('output/presentation/similarity_heatmap.png', dpi=300, bbox_inches='tight')
print("✅ 已保存：similarity_heatmap.png")

# 3. 绘制向量模长分布
norms = viz['norm_distribution']['norms']

plt.figure(figsize=(10, 6))
plt.hist(norms, bins=15, color='skyblue', edgecolor='black', alpha=0.7)
plt.axvline(np.mean(norms), color='red', linestyle='--', label=f'均值: {np.mean(norms):.2f}')
plt.xlabel('向量模长', fontsize=12, fontproperties='SimHei')
plt.ylabel('题目数量', fontsize=12, fontproperties='SimHei')
plt.title('题目向量模长分布', fontsize=14, fontproperties='SimHei')
plt.legend()
plt.tight_layout()
plt.savefig('output/presentation/norm_distribution.png', dpi=300, bbox_inches='tight')
print("✅ 已保存：norm_distribution.png")

# 4. 绘制维度分布
means = viz['dimension_distribution']['means']
stds = viz['dimension_distribution']['stds']
dims = viz['dimension_distribution']['dimensions']

plt.figure(figsize=(12, 6))
plt.bar(dims, means, yerr=stds, capsize=5, color='coral', alpha=0.7, edgecolor='black')
plt.xlabel('维度索引', fontsize=12, fontproperties='SimHei')
plt.ylabel('平均值 ± 标准差', fontsize=12, fontproperties='SimHei')
plt.title('向量前20个维度的分布特征', fontsize=14, fontproperties='SimHei')
plt.axhline(0, color='gray', linestyle='--', linewidth=0.8)
plt.tight_layout()
plt.savefig('output/presentation/dimension_distribution.png', dpi=300, bbox_inches='tight')
print("✅ 已保存：dimension_distribution.png")

print("\n🎉 所有图表生成完成！可直接插入PPT")
```

---

## 📌 组会演示检查清单

- [ ] 打开 `sample_embeddings.json` 确认向量是1024维
- [ ] 准备1-2个具体题目的向量对比例子
- [ ] 制作相似度矩阵热力图
- [ ] 准备最相似题目对的表格
- [ ] 解释加权融合的权重选择（Input 0.2, Constraint 0.25, ...）
- [ ] 演示如何计算两个题目的相似度（cosine similarity）
- [ ] 准备应对"为什么选择1024维"的提问（Qwen API固定输出）
- [ ] 准备应对"如何验证向量质量"的提问（相似度实验）

---

## 💡 答辩可能的问题

**Q1: 为什么向量是1024维？**
A: 使用Qwen text-embedding-v3 API，模型预训练时固定输出1024维。这是工业界常用的维度（BERT-768, OpenAI-1536, Qwen-1024）。

**Q2: 如何验证embedding质量？**
A: (1) 计算语义相似题目的余弦相似度（期望>0.8）
    (2) 检查不相关题目的相似度（期望<0.5）
    (3) 可视化聚类效果（t-SNE降维）

**Q3: 为什么要加权融合而不是拼接？**
A: 加权融合：1024维，计算快，突出重要字段（Constraint权重0.25）
   直接拼接：5120维，计算慢，所有字段等权重
   当前策略更适合大规模相似度计算。

**Q4: 目前处理了多少题目？**
A: 已处理39个LeetCode题目（还在持续生成中，目标1000个）。

**Q5: 这个工作的创新点？**
A: (1) 首次提出五元组Schema表示法
    (2) 结合LLM embedding实现题目语义向量化
    (3) 可量化、可复现、可扩展的题目相似度计算框架

---

## 🎯 关键数据速查

- **已处理题目数**：39 / 1000
- **向量维度**：1024
- **向量范围**：[-0.19, 0.24]
- **平均模长**：~3.2
- **文件大小**：完整数据 1.2 MB
- **API调用**：每题5次（5个字段）
- **处理时间**：~13秒/题
- **相似度阈值**：>0.85 判定为相似题

祝组会顺利！🎉
