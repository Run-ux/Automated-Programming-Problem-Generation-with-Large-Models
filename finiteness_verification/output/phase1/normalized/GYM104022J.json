{
  "problem_id": "GYM104022J",
  "source": "icpc_gym",
  "input_structure": [
    {
      "round": 1,
      "status": "success",
      "result": {
        "type": "weighted_undirected_graph",
        "length": {
          "min": 1,
          "max": 1000000
        },
        "value_range": {
          "min": -1,
          "max": 1000000
        },
        "properties": {
          "connected": true,
          "directed": false
        }
      }
    }
  ],
  "core_constraints": [
    {
      "round": 1,
      "status": "success",
      "result": {
        "constraints": [
          {
            "name": "distinctness",
            "description": "所有拼图块的编号唯一，范围从 1 到 m^2。",
            "formal": "∀i, j ∈ [1, m^2], i ≠ j → piece_id(i) ≠ piece_id(j)"
          },
          {
            "name": "adjacency_relation",
            "description": "每个拼图块有四个相邻关系（北、南、西、东），如果某个方向没有相邻块，则该方向的值为 -1。",
            "formal": "∀i ∈ [1, m^2], (n_i, s_i, w_i, e_i) ∈ {-1} ∪ [1, m^2]"
          },
          {
            "name": "connectivity",
            "description": "拼图块构成一个连通的方形网格，即每个块都能通过相邻关系连接到其他块。",
            "formal": "存在一条路径使得任意两个拼图块可以通过相邻关系互相到达"
          },
          {
            "name": "rectangular_layout",
            "description": "最终拼图结果是一个 m 行 m 列的方形网格。",
            "formal": "结果是一个 m × m 的矩阵"
          }
        ]
      }
    }
  ],
  "objective": [
    {
      "round": 1,
      "status": "success",
      "result": {
        "type": "construction",
        "description": "构造一个满足给定相邻关系的矩阵"
      }
    }
  ],
  "invariant": [
    {
      "round": 1,
      "status": "success",
      "result": {
        "invariants": [
          {
            "name": "topological_order",
            "description": "拓扑序不变量：通过构建有向无环图（DAG）表示拼图块之间的相邻关系，可以找到一个合法的拼图顺序，使得每一块在放置时其所有已知相邻块已经就位。",
            "properties": {}
          },
          {
            "name": "state_transition",
            "description": "状态转移不变量：在拼图过程中，每个拼图块的状态（位置和方向）根据其相邻块的状态进行更新，确保最终拼图的正确性。",
            "properties": {}
          }
        ]
      }
    }
  ]
}