{
  "problem_id": "P14163",
  "source": "luogu",
  "input_structure": [
    {
      "round": 1,
      "status": "success",
      "result": {
        "type": "array",
        "length": {
          "min": 1,
          "max": 1000
        },
        "value_range": {
          "min": 1,
          "max": 1000000000
        },
        "properties": {
          "inferred": true
        }
      }
    },
    {
      "round": 2,
      "status": "success",
      "result": {
        "type": "array",
        "length": {
          "min": 1,
          "max": 1000
        },
        "value_range": {
          "min": 1,
          "max": 1000000000
        },
        "properties": {
          "inferred": true
        }
      }
    },
    {
      "round": 3,
      "status": "success",
      "result": {
        "type": "array",
        "length": {
          "min": 1,
          "max": 1000
        },
        "value_range": {
          "min": 1,
          "max": 1000000000
        },
        "properties": {
          "inferred": true
        }
      }
    }
  ],
  "core_constraints": [
    {
      "round": 1,
      "status": "success",
      "result": {
        "constraints": [
          {
            "name": "valid_values",
            "description": "NaN 与任何浮点数 x 进行比较时，结果均为 False（除了不等于操作）",
            "formal": "∀x, NaN ≥ x = False, NaN ≤ x = False, NaN > x = False, NaN < x = False, NaN = x = False, NaN ≠ x = True"
          },
          {
            "name": "heap_structure",
            "description": "排列 P 是堆序列，当且仅当存在一个排列 Q 满足 P = HEAPIFY(Q)",
            "formal": "P 是堆序列 ⇔ ∃Q, P = HEAPIFY(Q)"
          },
          {
            "name": "equal_probability_of_packs",
            "description": "从 n 个元素的所有排列中等概率随机选取一个排列，求被选中的排列是堆序列的概率",
            "formal": "P(堆序列) = (堆序列的数量) / n!"
          },
          {
            "name": "output_precision",
            "description": "输出答案为整数 (pq^{-1} mod M)，其中 M = 10^9 + 7，q^{-1} 是满足 qq^{-1} ≡ 1 (mod M) 的整数",
            "formal": "输出 (pq^{-1} mod M), 其中 M = 10^9 + 7, q^{-1} 满足 qq^{-1} ≡ 1 (mod M)"
          }
        ]
      }
    },
    {
      "round": 2,
      "status": "success",
      "result": {
        "constraints": [
          {
            "name": "valid_values",
            "description": "NaN 与任何浮点数 x 进行比较时，结果均为 False（除了不等于运算）"
          },
          {
            "name": "heap_structure",
            "description": "堆序列 P 必须满足存在一个排列 Q 使得 P = HEAPIFY(Q)，其中 Q 是从 1 到 (n-1) 的整数加上一个额外的 NaN 元素的排列"
          },
          {
            "name": "probability_range",
            "description": "求被选中的排列是堆序列的概率，并输出为 (pq^{-1} mod M) 形式的整数，其中 M = 10^9 + 7，q^{-1} 是 q 在模 M 下的乘法逆元"
          }
        ]
      }
    },
    {
      "round": 3,
      "status": "success",
      "result": {
        "constraints": [
          {
            "name": "valid_values",
            "description": "NaN 与任何浮点数 x 进行比较时，结果均为 False（除了不等于运算）",
            "formal": "∀x, NaN ≥ x = False, NaN ≤ x = False, NaN > x = False, NaN < x = False, NaN = x = False, NaN ≠ x = True"
          },
          {
            "name": "heap_structure",
            "description": "堆的性质：对于任意节点 i，其父节点 j/2 满足 h[j/2] ≤ h[i]",
            "formal": "∀i, h[j/2] ≤ h[i], 其中 j/2 是满足 2x ≤ j 的最大整数 x"
          },
          {
            "name": "heap_structure",
            "description": "一个排列 P 是“堆序列”，当且仅当存在一个排列 Q 使得 P = HEAPIFY(Q)",
            "formal": "P 是堆序列 ⇔ ∃Q, P = HEAPIFY(Q)"
          },
          {
            "name": "output_precision",
            "description": "输出的答案是一个有理数 p/q，需要输出 (pq^{-1} mod M)，其中 M = 10^9 + 7，q^{-1} 是 q 在模 M 下的乘法逆元",
            "formal": "输出 (pq^{-1} mod M), 其中 M = 10^9 + 7, q^{-1} 满足 qq^{-1} ≡ 1 (mod M)"
          }
        ]
      }
    }
  ],
  "objective": [
    {
      "round": 1,
      "status": "success",
      "result": {
        "type": "count",
        "description": "计算给定n个元素的所有排列中，满足堆序列条件的排列数量，并输出这些排列占总排列数的比例"
      }
    },
    {
      "round": 2,
      "status": "success",
      "result": {
        "type": "count",
        "description": "求满足条件的堆序列的数量，即从n个元素的所有排列中等概率随机选取一个排列是堆序列的概率"
      }
    },
    {
      "round": 3,
      "status": "success",
      "result": {
        "type": "count",
        "description": "计算给定n个元素的所有排列中，满足堆序列条件的排列数量，并输出该数量与总排列数之比的概率值"
      }
    }
  ],
  "invariant": [
    {
      "round": 1,
      "status": "success",
      "result": {
        "name": "optimal_substructure",
        "description": "问题的解可以通过子问题的解组合而成，即堆序列的概率可以通过计算更小规模的问题来得到。",
        "properties": {}
      }
    },
    {
      "round": 2,
      "status": "success",
      "result": {
        "name": "optimal_substructure",
        "description": "问题的解可以通过子问题的解组合而成，即堆序列的概率可以通过计算更小规模问题的概率来推导。",
        "properties": {}
      }
    },
    {
      "round": 3,
      "status": "success",
      "result": {
        "name": "optimal_substructure",
        "description": "问题的解可以通过子问题的解组合而成，即堆序列的概率可以通过计算更小规模问题的概率来得到。",
        "properties": {}
      }
    }
  ]
}